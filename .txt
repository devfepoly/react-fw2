┌─────────────────────────────────────────────────────────────┐
│ FRONTEND: POST /api/tin-tuc                                 │
├─────────────────────────────────────────────────────────────┤
│ Headers: {                                                  │
│   Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6..."  │
│ }                                                           │
│ Body: { tieu_de: "...", noi_dung: "..." }                 │
└─────────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────────┐
│ MIDDLEWARE 1: verifyToken                                   │
├─────────────────────────────────────────────────────────────┤
│ - Lấy token từ header                                       │
│ - jwt.verify(token, JWT_SECRET)                            │
│ - req.user = { id: 1, email: "...", role: "admin" }       │
│ - next()                                                    │
└─────────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────────┐
│ MIDDLEWARE 2: authorizeRoles('admin')                       │
├─────────────────────────────────────────────────────────────┤
│ - Check: req.user.role === 'admin'                         │
│ - If YES: next()                                           │
│ - If NO: return 403 Forbidden                              │
└─────────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────────┐
│ CONTROLLER: tinTucController.create                         │
├─────────────────────────────────────────────────────────────┤
│ - Lấy data từ req.body                                      │
│ - Lấy user ID từ req.user.id                               │
│ - Tạo tin tức mới trong database                           │
│ - Return response                                           │
└─────────────────────────────────────────────────────────────┘
/////
┌─────────────────────────────────────────────────────────────┐
│ ACCESS TOKEN HẾT HẠN                                        │
├─────────────────────────────────────────────────────────────┤
│ Frontend: Request API → 401 Unauthorized                    │
│ Frontend: Gọi /api/users/refresh-token                     │
│           Body: { refreshToken: "..." }                     │
└─────────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────────┐
│ BACKEND: Verify refresh token                              │
├─────────────────────────────────────────────────────────────┤
│ jwt.verify(refreshToken, JWT_REFRESH_SECRET)               │
│   ↓                                                         │
│ decoded = { id: 1, email: "..." }                          │
│   ↓                                                         │
│ user = await User.findById(decoded.id)                     │
│   ↓                                                         │
│ newAccessToken = generateAccessToken(user)                 │
└─────────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────────┐
│ RESPONSE                                                    │
├─────────────────────────────────────────────────────────────┤
│ {                                                           │
│   success: true,                                           │
│   accessToken: "NEW_ACCESS_TOKEN"                          │
│ }                                                           │
└─────────────────────────────────────────────────────────────┘
                        ↓
┌─────────────────────────────────────────────────────────────┐
│ FRONTEND: Lưu new access token                             │
├─────────────────────────────────────────────────────────────┤
│ localStorage.setItem('token', newAccessToken)              │
│ Retry original request with new token                      │
└─────────────────────────────────────────────────────────────┘